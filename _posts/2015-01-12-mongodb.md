---
layout: post
title: MongoDB复杂查询
---

### Mongodb的复杂查询：

+ 主要是对于subdocuments的操作， 数据格式如下：

    ~~~
    {
        "_id" : ObjectId("53c36f20ef48a6371fb980e1"),
        "test_docs" : [
            {
                "name" : ["test1", "test2", "test3"],
                "deleted" : true,
                "sub_id": "no0001"
            }
        ]
    }
    ~~~
    
    test_docs是一个subdocuments，可以有增删改查的操作，就是对Array的操作：

+ 给test_docs添加一个元素

    ~~~
    db.collection.update(
        {"_id": ObjectId("53c36f20ef48a6371fb980e1")}},
        {"$push": {"test_docs":{"name": ["test1", "test2", "test3"],"deleted": false,"sub_id": "no002"}
            }
        })
    ~~~
        
<待续>

